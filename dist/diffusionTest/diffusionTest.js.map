{"version":3,"file":"/diffusionTest/diffusionTest.js","mappings":";;;AAAA;;AAGA;;AAGA;AAC6B;;AAG7B;;AAEA,SAASA,eAAeA,CAAA,EAAI;EACxBC,oBAAoB,CAAC,CAAC;AAC1B;AAEA,SAASA,oBAAoBA,CAAA,EAAI;EAC7B,MAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;EACtDF,SAAS,CAACG,gBAAgB,CAAC,OAAO,EAAEC,iBAAiB,CAAC;AAC1D;AAEA,eAAeA,iBAAiBA,CAAA,EAAI;EAChC,MAAMJ,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;EACtDF,SAAS,CAACK,QAAQ,GAAG,IAAI;EACzB,MAAMC,cAAc,GAAGL,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;EACxDI,cAAc,CAACD,QAAQ,GAAG,IAAI;EAC9B,MAAME,MAAM,GAAGD,cAAc,CAACE,KAAK;EAEnC,IAAID,MAAM,EAAE;IAER,IAAIE,MAAM;IAEV,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oBAAoB,EAAE;QAC/CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjB,QAAQ,EAAET;QACd,CAAC;MACL,CAAC,CAAC;MACFE,MAAM,GAAG,MAAMC,QAAQ,CAACO,IAAI,CAAC,CAAC;MAC9BC,OAAO,CAACC,GAAG,CAACV,MAAM,CAAC;IACvB,CAAC,CAAC,OAAOW,GAAG,EAAE;MACVF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC;MAChB;IACJ;;IAEA;IACA,IAAIX,MAAM,CAACA,MAAM,CAACY,MAAM,CAAC,CAAC,CAAC,EAAE;MACzB,MAAMC,gBAAgB,GAAGrB,QAAQ,CAACC,aAAa,CAAC,mBAAmB,CAAC;MACpE,MAAMqB,SAAS,GAAGtB,QAAQ,CAACuB,aAAa,CAAC,KAAK,CAAC;MAC/CD,SAAS,CAACE,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;MACpCH,SAAS,CAACI,GAAG,GAAI,0BAAyBlB,MAAM,CAACA,MAAM,CAACY,MAAM,CAAC,CAAC,CAAE,EAAC;MACnE,IAAIC,gBAAgB,CAACM,UAAU,EAAE;QAC7BN,gBAAgB,CAACO,YAAY,CAACN,SAAS,EAAED,gBAAgB,CAACM,UAAU,CAAC;MACzE,CAAC,MAAM;QACHN,gBAAgB,CAACQ,WAAW,CAACP,SAAS,CAAC;MAC3C;IACJ;EACJ;EAEAvB,SAAS,CAACK,QAAQ,GAAG,KAAK;EAC1BC,cAAc,CAACD,QAAQ,GAAG,KAAK;AACnC;;AAEA;;AAEAP,eAAe,CAAC,CAAC,C","sources":["webpack://home-server-router/./src/diffusionTest/diffusionTest.js"],"sourcesContent":["// Javascript for diffusion page\r\n\r\n\r\n// ====== IMPORTS ======\r\n\r\n\r\n// Css\r\nimport './diffusionTest.css';\r\n\r\n\r\n// ====== FUNCTIONS ======\r\n\r\nfunction attachListeners () {\r\n    addSubmitBtnListener();\r\n}\r\n\r\nfunction addSubmitBtnListener () {\r\n    const submitBtn = document.querySelector('#submitBtn');\r\n    submitBtn.addEventListener('click', handleSubmitClick);\r\n}\r\n\r\nasync function handleSubmitClick () {\r\n    const submitBtn = document.querySelector('#submitBtn');\r\n    submitBtn.disabled = true;\r\n    const promptTextArea = document.querySelector('#prompt');\r\n    promptTextArea.disabled = true;\r\n    const prompt = promptTextArea.value;\r\n\r\n    if (prompt) {\r\n\r\n        let result;\r\n        \r\n        try {\r\n            const response = await fetch('/diffusion/txt2Img', {\r\n                method: 'POST',\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"prompt\": prompt\r\n                })\r\n            });\r\n            result = await response.json();\r\n            console.log(result);\r\n        } catch (err) {\r\n            console.log(err);\r\n            return;\r\n        }\r\n        \r\n        // Set result image if exists\r\n        if (result.result.images[0]) {\r\n            const resultImgWrapper = document.querySelector('.resultImgWrapper');\r\n            const resultImg = document.createElement('img');\r\n            resultImg.classList.add('resultImg');\r\n            resultImg.src = `data:image/png;base64, ${result.result.images[0]}`;\r\n            if (resultImgWrapper.firstChild) {\r\n                resultImgWrapper.insertBefore(resultImg, resultImgWrapper.firstChild);\r\n            } else {\r\n                resultImgWrapper.appendChild(resultImg);\r\n            }\r\n        }\r\n    }\r\n\r\n    submitBtn.disabled = false;\r\n    promptTextArea.disabled = false;\r\n}\r\n    \r\n// ====== MAIN ======\r\n\r\nattachListeners();"],"names":["attachListeners","addSubmitBtnListener","submitBtn","document","querySelector","addEventListener","handleSubmitClick","disabled","promptTextArea","prompt","value","result","response","fetch","method","headers","body","JSON","stringify","json","console","log","err","images","resultImgWrapper","resultImg","createElement","classList","add","src","firstChild","insertBefore","appendChild"],"sourceRoot":""}